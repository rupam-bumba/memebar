{"ast":null,"code":"import _defineProperty from\"/home/rupambumba/Documents/memebar/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/rupambumba/Documents/memebar/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/rupambumba/Documents/memebar/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useContext}from\"react\";import{Redirect}from\"react-router-dom\";import clsx from\"clsx\";// un used\n// contex from src >> contex\nimport{UserDataContex}from\"../../context/UserDataContex\";// cookie managers\nimport cookie from\"js-cookie\";// axios fatching lib\nimport axios from\"axios\";// material-ui packges\nimport{makeStyles}from\"@material-ui/core/styles\";import IconButton from\"@material-ui/core/IconButton\";import Button from\"@material-ui/core/Button\";// import Input from \"@material-ui/core/Input\";\n// import FilledInput from \"@material-ui/core/FilledInput\";\nimport OutlinedInput from\"@material-ui/core/OutlinedInput\";import InputLabel from\"@material-ui/core/InputLabel\";import InputAdornment from\"@material-ui/core/InputAdornment\";// import FormHelperText from \"@material-ui/core/FormHelperText\";\nimport FormControl from\"@material-ui/core/FormControl\";import TextField from\"@material-ui/core/TextField\";import Visibility from\"@material-ui/icons/Visibility\";import VisibilityOff from\"@material-ui/icons/VisibilityOff\";// styleing component\nvar useStyles=makeStyles(function(theme){return{root:{display:\"flex\",flexWrap:\"wrap\"},margin:{margin:theme.spacing(1)},withoutLabel:{marginTop:theme.spacing(3)},textField:{width:200}};});//main\nexport default function Login(){// const [UserData, setUserData] = useContext(UserDataContex);\n// const [isloging, setisloging] = useState(false)\n//\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),logintrigger=_useState2[0],setlogintrigger=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),reLoadOnce=_useState4[0],setreLoadOnce=_useState4[1];var classes=useStyles();var _useState5=useState({email:\"\",password:\"\",showPassword:false}),_useState6=_slicedToArray(_useState5,2),values=_useState6[0],setValues=_useState6[1];// seting values\nvar handleChange=function handleChange(prop){return function(event){setValues(_objectSpread({},values,_defineProperty({},prop,event.target.value)));console.log(\"|63 DEBUG | \"+JSON.stringify(values));};};// password EYE show hide\nvar handleClickShowPassword=function handleClickShowPassword(){setValues(_objectSpread({},values,{showPassword:!values.showPassword}));};//password key press\nvar handleMouseDownPassword=function handleMouseDownPassword(event){event.preventDefault();};//form handel on submit\nvar handleFormSubmit=function handleFormSubmit(evnt){evnt.preventDefault();console.log(\"|76 DEBUG | \"+\"Login Submit form call >> \");setlogintrigger(!logintrigger);console.log(\"|78 DEBUG | \"+logintrigger);};// faching token values value\nuseEffect(function(){console.log(\"|83 DEBUG | [logintrigger] useEffect relode \");console.log(\"|84 DEBUG | [in useEffect]\"+JSON.stringify(values));axios.post(\"http://localhost:5000/api/user/login\",{email:values.email,password:values.password})// suscessfull user fached data\n.then(function(result){console.log(\"|93 DEBUG | axios >> user >> login >> \");console.log(\"|94 DEBUG | \"+result.data);// set cookes\ncookie.set(\"auth-token\",result.data.token,{expires:13});cookie.set(\"_id\",result.data.userID,{expires:13});cookie.set(\"login\",true,{expires:13});// console.log('|100 DEBUG| contex api userData updated >>>> '+JSON.stringify(UserData));\nsetreLoadOnce(true);}).catch(function(err){// console.log(\"|105 DEBUG| axios >> user >> error >> \");\n// console.log(\"|106 DEBUG|\" + err);\n// TODO: error heandeling\n});},[logintrigger,reLoadOnce]);// front end viwe\nreturn React.createElement(\"div\",{className:classes.root},// if loged in  redirect to /HOME TODO:\ncookie.get('login')&&React.createElement(Redirect,{to:\"/home\"})// cookie.get('login')&& \"|Debug| login\"\n,React.createElement(\"h2\",null,\"Log in\"),React.createElement(\"div\",null,React.createElement(\"form\",{onSubmit:handleFormSubmit},React.createElement(FormControl// email\n,{fullWidth:true,className:(clsx(classes.margin,classes.textField),classes.margin),variant:\"outlined\"},React.createElement(TextField,{id:\"outlined-search\",label:\"Email\",type:\"search\",variant:\"outlined\",onChange:handleChange(\"email\")})),React.createElement(FormControl// Password\n,{fullWidth:true,className:(clsx(classes.margin,classes.textField),classes.margin),variant:\"outlined\"},React.createElement(InputLabel,{htmlFor:\"outlined-adornment-password\"},\"Password\"),React.createElement(OutlinedInput,{id:\"outlined-adornment-password\",type:values.showPassword?\"text\":\"password\",value:values.password,onChange:handleChange(\"password\"),endAdornment:React.createElement(InputAdornment,{position:\"end\"},React.createElement(IconButton,{\"aria-label\":\"toggle password visibility\",onClick:handleClickShowPassword,onMouseDown:handleMouseDownPassword,edge:\"end\"},values.showPassword?React.createElement(Visibility,null):React.createElement(VisibilityOff,null))),labelWidth:70})),React.createElement(FormControl// Login  Button\n,{className:classes.margin,variant:\"outlined\"},React.createElement(Button,{variant:\"contained\",color:\"primary\",size:\"large\",type:\"submit\"},\"LogIn\")))));}","map":{"version":3,"sources":["/home/rupambumba/Documents/memebar/client/src/components/users/Login.js"],"names":["React","useEffect","useState","useContext","Redirect","clsx","UserDataContex","cookie","axios","makeStyles","IconButton","Button","OutlinedInput","InputLabel","InputAdornment","FormControl","TextField","Visibility","VisibilityOff","useStyles","theme","root","display","flexWrap","margin","spacing","withoutLabel","marginTop","textField","width","Login","logintrigger","setlogintrigger","reLoadOnce","setreLoadOnce","classes","email","password","showPassword","values","setValues","handleChange","prop","event","target","value","console","log","JSON","stringify","handleClickShowPassword","handleMouseDownPassword","preventDefault","handleFormSubmit","evnt","post","then","result","data","set","token","expires","userID","catch","err","get"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport { Redirect } from \"react-router-dom\";\n\nimport clsx from \"clsx\"; // un used\n// contex from src >> contex\nimport { UserDataContex } from \"../../context/UserDataContex\";\n// cookie managers\nimport cookie from \"js-cookie\";\n\n// axios fatching lib\nimport axios from \"axios\";\n\n// material-ui packges\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Button from \"@material-ui/core/Button\";\n// import Input from \"@material-ui/core/Input\";\n// import FilledInput from \"@material-ui/core/FilledInput\";\nimport OutlinedInput from \"@material-ui/core/OutlinedInput\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\n// import FormHelperText from \"@material-ui/core/FormHelperText\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Visibility from \"@material-ui/icons/Visibility\";\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\n\n// styleing component\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n  },\n  margin: {\n    margin: theme.spacing(1),\n  },\n  withoutLabel: {\n    marginTop: theme.spacing(3),\n  },\n  textField: {\n    width: 200,\n  },\n}));\n\n//main\nexport default function Login() {\n  // const [UserData, setUserData] = useContext(UserDataContex);\n  // const [isloging, setisloging] = useState(false)\n  //\n  const [logintrigger, setlogintrigger] = useState(false);\n  const [reLoadOnce, setreLoadOnce] = useState(false)\n\n  const classes = useStyles();\n  const [values, setValues] = useState({\n    email: \"\",\n    password: \"\",\n    showPassword: false,\n  });\n\n  // seting values\n  const handleChange = (prop) => (event) => {\n    setValues({ ...values, [prop]: event.target.value });\n    console.log(\"|63 DEBUG | \" + JSON.stringify(values));\n  };\n  // password EYE show hide\n  const handleClickShowPassword = () => {\n    setValues({ ...values, showPassword: !values.showPassword });\n  };\n  //password key press\n  const handleMouseDownPassword = (event) => {\n    event.preventDefault();\n  };\n  //form handel on submit\n  const handleFormSubmit = (evnt) => {\n    evnt.preventDefault();\n    console.log(\"|76 DEBUG | \" + \"Login Submit form call >> \");\n    setlogintrigger(!logintrigger);\n    console.log(\"|78 DEBUG | \" + logintrigger);\n  };\n\n  // faching token values value\n  useEffect(() => {\n    console.log(\"|83 DEBUG | [logintrigger] useEffect relode \");\n    console.log(\"|84 DEBUG | [in useEffect]\" + JSON.stringify(values));\n\n    axios\n      .post(\"http://localhost:5000/api/user/login\", {\n        email: values.email,\n        password: values.password,\n      })\n      // suscessfull user fached data\n      .then((result) => {\n        console.log(\"|93 DEBUG | axios >> user >> login >> \");\n        console.log(\"|94 DEBUG | \"+result.data);\n\n        // set cookes\n        cookie.set(\"auth-token\", result.data.token, { expires: 13 });\n        cookie.set(\"_id\", result.data.userID, { expires: 13 });\n        cookie.set(\"login\", true, { expires: 13 });\n        // console.log('|100 DEBUG| contex api userData updated >>>> '+JSON.stringify(UserData));\n\n        setreLoadOnce(true)\n      })\n      .catch((err) => {\n        // console.log(\"|105 DEBUG| axios >> user >> error >> \");\n        // console.log(\"|106 DEBUG|\" + err);\n        // TODO: error heandeling\n      });\n  }, [logintrigger,reLoadOnce]);\n\n  // front end viwe\n  return (\n    <div className={classes.root}>\n\n      {\n        // if loged in  redirect to /HOME TODO:\n        cookie.get('login')&& <Redirect to=\"/home\" />\n        // cookie.get('login')&& \"|Debug| login\"\n\n      }\n\n      <h2>Log in</h2>\n\n      <div>\n        <form onSubmit={handleFormSubmit}>\n          <FormControl // email\n            fullWidth\n            className={\n              (clsx(classes.margin, classes.textField), classes.margin)\n            }\n            variant=\"outlined\"\n          >\n            <TextField\n              id=\"outlined-search\"\n              label=\"Email\"\n              type=\"search\"\n              variant=\"outlined\"\n              onChange={handleChange(\"email\")}\n            />\n          </FormControl>\n\n          <FormControl // Password\n            fullWidth\n            className={\n              (clsx(classes.margin, classes.textField), classes.margin)\n            }\n            variant=\"outlined\"\n          >\n            <InputLabel htmlFor=\"outlined-adornment-password\">\n              Password\n            </InputLabel>\n            <OutlinedInput\n              id=\"outlined-adornment-password\"\n              type={values.showPassword ? \"text\" : \"password\"}\n              value={values.password}\n              onChange={handleChange(\"password\")}\n              endAdornment={\n                <InputAdornment position=\"end\">\n                  <IconButton\n                    aria-label=\"toggle password visibility\"\n                    onClick={handleClickShowPassword}\n                    onMouseDown={handleMouseDownPassword}\n                    edge=\"end\"\n                  >\n                    {values.showPassword ? <Visibility /> : <VisibilityOff />}\n                  </IconButton>\n                </InputAdornment>\n              }\n              labelWidth={70}\n            />\n          </FormControl>\n\n          <FormControl // Login  Button\n            className={classes.margin}\n            variant=\"outlined\"\n          >\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              size=\"large\"\n              type=\"submit\"\n            >\n              LogIn\n            </Button>\n          </FormControl>\n        </form>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}